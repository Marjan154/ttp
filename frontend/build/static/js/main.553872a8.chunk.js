(this["webpackJsonpttp-fullstack-2020"]=this["webpackJsonpttp-fullstack-2020"]||[]).push([[0],{105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),o=a.n(c),l=(a(73),a(17)),s=a(29),i=(a(74),a(24)),u=a(31),m=a(9),p=a(10),h=a(12),b=a(11),d=a(13),f=(n.Component,a(14)),E=a.n(f),y=(a(58),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).onSubmit=function(t){t.preventDefault(),E.a.put("https://floating-bastion-36036.herokuapp.com/api/auth/login",Object(u.a)({},e.state)).then((function(e){return e.data})).then((function(t){return e.props.history.push("/home/".concat(t.email))}))},e.inputHandler=function(t){t.preventDefault(),e.setState(Object(i.a)({},t.target.name,t.target.value))},e.state={email:"",password:""},e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",null,"STOCK PORTFOLIO"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:this.inputHandler}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:this.inputHandler}),r.a.createElement("button",null,"Login"),r.a.createElement(l.b,{to:"/register"},r.a.createElement("p",{className:"message"},"Not registered?")))))}}]),t}(n.Component)),v=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).onSubmit=function(t){t.preventDefault(),E.a.post("https://floating-bastion-36036.herokuapp.com//api/users/create",Object(u.a)({},e.state)).then((function(t){console.log("data",t),e.props.history.push("/home/".concat(t.data.email))}))},e.inputHandler=function(t){t.preventDefault(),e.setState(Object(i.a)({},t.target.name,t.target.value))},e.state={name:"",email:"",password:""},e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",null,"STOCK PORTFOLIO"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"name",name:"name",onChange:this.inputHandler}),r.a.createElement("input",{type:"text",placeholder:"email address",name:"email",onChange:this.inputHandler}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:this.inputHandler}),r.a.createElement("button",null,"create"),r.a.createElement(l.b,{to:"/"},r.a.createElement("p",{className:"message"},"Already registered?")))))}}]),t}(n.Component),g=(a(96),a(5)),x=a.n(g),O=a(8),k=(a(60),a(110)),j=a(109),w=(a(98),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e="john@john.com";console.log(this.props.location.pathname.includes("/home/"));var t=this.props.location.pathname.includes("/home/")?{height:"100px",fontSize:"40px",fontFamily:"Ubuntu, sans-serif",fontWeight:"1000",color:"white",backgroundColor:"#1e1e6e"}:{height:"100px",fontSize:"40px",fontFamily:"Ubuntu, sans-serif",fontWeight:"1000",color:"#1e1e6e",backgroundColor:"white"};return"/"===this.props.location.pathname||"/register"===this.props.location.pathname?r.a.createElement("div",null):r.a.createElement(k.a,{collapseOnSelect:!0,expand:"lg",variant:this.props.location.pathname.includes("/home/")?"dark":"light",style:t},r.a.createElement(k.a.Brand,{style:t,href:"/home/".concat(e)},"StockPortfolio"),r.a.createElement(k.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(k.a.Collapse,{id:"responsive-navbar-nav",style:{color:"white"}},r.a.createElement(j.a,{className:"ml-auto"},r.a.createElement(j.a.Link,{style:t,eventKey:1,href:"/home/".concat(e)},"Home"),r.a.createElement(j.a.Link,{style:t,eventKey:2,href:"/buy/".concat(e)},"Buy"),r.a.createElement(j.a.Link,{style:t,eventKey:3,href:"/transactions/".concat(e)},"Transactions"),r.a.createElement(j.a.Link,{style:t,eventKey:4,href:"/"},"Logout"))))}}]),t}(n.Component)),S=Object(s.f)(w);a(101).config();var T="Tpk_629c2ff3f36c4aa4821c7f061431f683",N=(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_IEX_API_KEY,function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://sandbox.iexapis.com/stable/search/".concat(t,"?token=").concat(T),e.next=3,E.a.get(a).then((function(e){return e.data}));case 3:return n=e.sent,r=n.map((function(e){return e.symbol})),e.next=7,C(r);case 7:return c=e.sent,e.abrupt("return",[n,c]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.join(","),n="https://sandbox.iexapis.com/stable/stock/market/batch?symbols=".concat(a,"&types=price,ohlc&token=").concat(T),e.next=4,E.a.get(n).then((function(e){return e.data}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://floating-bastion-36036.herokuapp.com/api/transactions/transactions/",e.next=3,E.a.get("https://floating-bastion-36036.herokuapp.com/api/transactions/transactions/",{params:{email:t}});case 3:return a=e.sent,n=a.data.map((function(e){return e.symbol})),e.next=7,C(n);case 7:return r=e.sent,e.abrupt("return",[a.data,r]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(O.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://floating-bastion-36036.herokuapp.com/api/transactions/groupbysymbol/",e.next=3,E.a.get("https://floating-bastion-36036.herokuapp.com/api/transactions/groupbysymbol/",{params:{email:t}});case 3:return a=e.sent,n=a.data.map((function(e){return e.symbol})),e.next=7,C(n);case 7:return r=e.sent,e.abrupt("return",[a.data,r]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://floating-bastion-36036.herokuapp.com/api/users/find/",e.next=3,E.a.get("https://floating-bastion-36036.herokuapp.com/api/users/find/",{params:{email:t}});case 3:return a=e.sent,e.abrupt("return",a.data.balance);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(O.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://floating-bastion-36036.herokuapp.com/api/transactions/transactions/",e.next=3,E.a.post("https://floating-bastion-36036.herokuapp.com/api/transactions/transactions/",Object(u.a)({},t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={email:a.props.match.params.email,balance:0,searchbarVal:"",bestMatches:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(this.state.email);case 2:t=e.sent,this.setState({balance:Number(t).toFixed(2)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.email,t=new Date(Date.now());return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"banner"},r.a.createElement("div",{className:"grid-container"},r.a.createElement("h1",{id:"homeTitle"},"Welcome ",e," !"),r.a.createElement("h1",{style:{color:"white",width:"100vw",marginTop:"-15vh"}},t.toDateString(),".",r.a.createElement("br",null),"Your'e balance is $",this.state.balance,". What would you like to do today?"),r.a.createElement("div",{className:"stats"},r.a.createElement(l.b,{to:"/profile/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"View Profile"),r.a.createElement("h3",{style:{color:"#1e1e6e"}},"You have $",this.state.balance)))),r.a.createElement(l.b,{to:"/transactions/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"View Transactions"),r.a.createElement("h3",{style:{color:"#1e1e6e"}},"x transactions")))),r.a.createElement(l.b,{to:"/buy/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"Buy/Sell Stocks"),r.a.createElement("h3",{style:{color:"#1e1e6e"}})))))))))}}]),t}(n.Component),F=a(67),M=a(107),I=a(108),A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).genericModal=function(){var e=Object(n.useState)(!1),t=Object(F.a)(e,2),c=t[0],o=t[1],l=function(){o(!1),a.props.refresh()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{variant:"primary",onClick:function(){return o(!0)},style:{backgroundColor:"#1e1e6e"}},a.props.label),r.a.createElement(I.a,{show:c,onHide:l},r.a.createElement(I.a.Header,{closeButton:!0},r.a.createElement(I.a.Title,null,a.props.title)),r.a.createElement(I.a.Body,null," ",a.props.form),r.a.createElement(I.a.Footer,null,r.a.createElement(M.a,{variant:"secondary",onClick:l},"Close"))))},a.state={startDate:new Date},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(this.genericModal,null)}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).stylesInput={width:"80%",boxSizing:"border-box",border:"2px solid #ccc",borderRadius:"4px",fontSize:"30px",backgroundColor:"white",backgroundPosition:"10px 10px",backgroundRepeat:" no-repeat",padding:"12px 20px 12px 40px"},a.stylesButton={backgroundColor:"#1e1e6e",inline:"block",border:"none",color:"white",padding:"14px",textAlign:"center",textDecoration:"none",display:"inline - block",fontSize:"30px",margin:"4px 2px",cursor:"pointer",borderRadius:"10px",marginLeft:"5px"},a.inputHandler=function(e){e.preventDefault(),a.setState(Object(i.a)({},e.target.name,e.target.value),(function(){console.log(a.state)}))},a.onSubmit=function(e){e.preventDefault(),N(a.state.searchbarVal).then((function(e){a.setState({bestMatches:e[0],stockInfo:e[1]})}))},a.buyForm=function(e,t){return r.a.createElement("div",null,"The price is $",e,r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),a.buy(e,n.target.shares_amount.value,t)}},r.a.createElement("input",{type:"number",pattern:"[0-9]*",min:"1",required:!0,placeholder:"Number of shares",name:"shares_amount",defaultValue:1}),r.a.createElement("button",null,"Buy")))},a.buy=function(){var e=Object(O.a)(x.a.mark((function e(t,n,r){var c,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=parseInt(n),o=parseFloat(t)*c,console.log(c,o,o*c),!(a.state.balance<o)){e.next=7;break}console.log("not enough"),e.next=10;break;case 7:return e.next=9,_({shares:c,cost:o,symbol:r,email:a.state.email});case 9:console.log("enough money");case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.refresh=Object(O.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B(a.state.email).then((function(e){a.setState({balance:Number(e).toFixed(2)})}));case 1:case"end":return e.stop()}}),e)}))),a.displaySearches=function(e,t){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.securityName),r.a.createElement("td",null,e.securityType),r.a.createElement("td",null," ",e.region," "),r.a.createElement("td",null,e.exchange),r.a.createElement("td",null,t[e.symbol].price),r.a.createElement("td",null,r.a.createElement(A,{form:a.buyForm(t[e.symbol].price,e.symbol),label:"Buy",title:"Buy stock share",refresh:a.refresh})))}))},a.state=Object(i.a)({email:a.props.match.params.email,balance:0,searchbarVal:"",bestMatches:[],stockInfo:{}},"balance",0),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(this.state.email);case 2:t=e.sent,this.setState({balance:Number(t).toFixed(2)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displaySearches(this.state.bestMatches,this.state.stockInfo);return r.a.createElement("div",{style:{marginTop:"100px",marginBottom:"50px"}},r.a.createElement("h1",{style:{fontSize:"5rem",margin:"30px",color:"#1e1e6e",marginTop:"-5vh"}},"Make Transactions"),r.a.createElement("h1",{style:{textAlign:"right",padding:"40px",color:"#91b0ff",marginTop:"-5vh"}},"Your balance is $",this.state.balance),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Search stock",required:!0,name:"searchbarVal",onChange:this.inputHandler,style:this.stylesInput}),r.a.createElement("button",{style:this.stylesButton},"Search"))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},e.length?r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol"),r.a.createElement("th",null,"Security Name"),r.a.createElement("th",null,"Security Type"),r.a.createElement("th",null,"Region"),r.a.createElement("th",null,"Exchange"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Buy"))):r.a.createElement("div",null),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).displayTrans=function(e){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null,e.date),r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.shares))}))},a.state={email:a.props.match.params.email,transactions:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(this.state.email);case 2:return t=e.sent,e.next=5,B(this.state.email);case 5:a=e.sent,this.setState({transactions:t[0],balance:Number(a).toFixed(2)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displayTrans(this.state.transactions);return r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement("h1",{style:{fontSize:"5rem",margin:"30px",color:"#1e1e6e",marginTop:"-5vh"}},"My Transactions"),r.a.createElement("h1",{style:{textAlign:"right",padding:"40px",color:"#91b0ff",marginTop:"-5vh"}},"Your balance is $",this.state.balance),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Symbol/Ticker"),r.a.createElement("th",null,"Number of Shares"))),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).displayTrans=function(e,t){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.shares),r.a.createElement("td",null,t[e.symbol].price*e.shares),r.a.createElement("td",null," ",t[e.symbol].ohlc.open.price||"N/A"," "),r.a.createElement("td",null," ",t[e.symbol].price," "),r.a.createElement("td",null," ",t[e.symbol].ohlc.close.price||"N/A"," "))}))},a.state={email:a.props.match.params.email,transactions:[],prices:{}},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(this.state.email);case 2:t=e.sent,this.setState({transactions:t[0],prices:t[1]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displayTrans(this.state.transactions,this.state.prices);return r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement("h1",null,"My Profile"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol/Ticker"),r.a.createElement("th",null,"Number of Shares"),r.a.createElement("th",null,"Current Values"),r.a.createElement("th",null,"Open Price"),r.a.createElement("th",null,"Current Price"),r.a.createElement("th",null,"Close Price"))),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component);var V=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.a,null,r.a.createElement(S,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:y}),r.a.createElement(s.a,{exact:!0,path:"/register",component:v}),r.a.createElement(s.a,{exact:!0,path:"/home/:email",component:H}),r.a.createElement(s.a,{exact:!0,path:"/buy/:email",component:L}),r.a.createElement(s.a,{exact:!0,path:"/transactions/:email",component:K}),r.a.createElement(s.a,{exact:!0,path:"/profile/:email",component:R}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(104);o.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},58:function(e,t,a){},60:function(e,t,a){},68:function(e,t,a){e.exports=a(105)},73:function(e,t,a){},74:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},96:function(e,t,a){},98:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.553872a8.chunk.js.map