(this["webpackJsonpttp-fullstack-2020"]=this["webpackJsonpttp-fullstack-2020"]||[]).push([[0],{45:function(e,t,a){},47:function(e,t,a){},55:function(e,t,a){e.exports=a(90)},60:function(e,t,a){},61:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},83:function(e,t,a){},85:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),c=a.n(l),o=(a(60),a(14)),s=a(23),i=(a(61),a(22)),u=a(25),m=a(5),p=a(6),h=a(8),b=a(7),d=a(9),f=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{style:{bottom:0,width:"100%",height:"120px",backgroundColor:"#1e1e6e",color:"white",paddingTop:"5px",position:"static"}},r.a.createElement("div",{className:"container text-center"},r.a.createElement("span",{className:"myfont",style:{width:"100%"}},r.a.createElement("b",null,"Created by: "),r.a.createElement("br",null),"Marjan Ansar")))}}]),t}(n.Component),E=a(13),y=a.n(E),v=(a(45),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).onSubmit=function(t){t.preventDefault(),y.a.put("http://localhost:5000/api/auth/login",Object(u.a)({},e.state)).then((function(e){return e.data})).then((function(t){return e.props.history.push("/home/".concat(t.email))}))},e.inputHandler=function(t){t.preventDefault(),e.setState(Object(i.a)({},t.target.name,t.target.value))},e.state={email:"",password:""},e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",null,"STOCK PORTFOLIO"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Email",name:"email",onChange:this.inputHandler}),r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",onChange:this.inputHandler}),r.a.createElement("button",null,"Login"),r.a.createElement(o.b,{to:"/register"},r.a.createElement("p",{className:"message"},"Not registered?")))))}}]),t}(n.Component)),g=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(b.a)(t).call(this))).onSubmit=function(t){t.preventDefault(),y.a.post("http://localhost:5000/api/users/create",Object(u.a)({},e.state)).then((function(t){console.log("data",t),e.props.history.push("/home/".concat(t.data.email))}))},e.inputHandler=function(t){t.preventDefault(),e.setState(Object(i.a)({},t.target.name,t.target.value))},e.state={name:"",email:"",password:""},e}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",null,"STOCK PORTFOLIO"),r.a.createElement("div",{className:"form"},r.a.createElement("form",{className:"login-form",onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"name",name:"name",onChange:this.inputHandler}),r.a.createElement("input",{type:"text",placeholder:"email address",name:"email",onChange:this.inputHandler}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:this.inputHandler}),r.a.createElement("button",null,"create"),r.a.createElement(o.b,{to:"/"},r.a.createElement("p",{className:"message"},"Already registered?")))))}}]),t}(n.Component),x=(a(83),a(3)),O=a.n(x),j=a(12),w=(a(47),a(85),function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.match.params.email;return r.a.createElement("div",{id:"nav-container"},r.a.createElement("nav",{className:"nav"},r.a.createElement("div",{className:"navName"},r.a.createElement("h1",{style:{color:"#1e1e6e"}},"Stock Portfolio")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/home/".concat(e),style:{textDecoration:"none"}},"Home")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/transactions/".concat(e),style:{textDecoration:"none"}},"Transactions")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/buy/".concat(e),style:{textDecoration:"none"}},"Buy")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",style:{textDecoration:"none"}},"Logout")))))}}]),t}(n.Component)),k=Object(s.f)(w);a(86).config();var S="Tpk_629c2ff3f36c4aa4821c7f061431f683",N=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,r,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://sandbox.iexapis.com/stable/search/".concat(t,"?token=").concat(S),e.next=3,y.a.get(a).then((function(e){return e.data}));case 3:return n=e.sent,r=n.map((function(e){return e.symbol})),e.next=7,T(r);case 7:return l=e.sent,e.abrupt("return",[n,l]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.join(","),n="https://sandbox.iexapis.com/stable/stock/market/batch?symbols=".concat(a,"&types=price,ohlc&token=").concat(S),e.next=4,y.a.get(n).then((function(e){return e.data}));case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5000/api/transactions/transactions/",e.next=3,y.a.get("http://localhost:5000/api/transactions/transactions/",{params:{email:t}});case 3:return a=e.sent,n=a.data.map((function(e){return e.symbol})),e.next=7,T(n);case 7:return r=e.sent,e.abrupt("return",[a.data,r]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(O.a.mark((function e(t){var a,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5000/api/transactions/groupbysymbol/",e.next=3,y.a.get("http://localhost:5000/api/transactions/groupbysymbol/",{params:{email:t}});case 3:return a=e.sent,n=a.data.map((function(e){return e.symbol})),e.next=7,T(n);case 7:return r=e.sent,e.abrupt("return",[a.data,r]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5000/api/users/find/",e.next=3,y.a.get("http://localhost:5000/api/users/find/",{params:{email:t}});case 3:return a=e.sent,e.abrupt("return",a.data.balance);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:5000/api/transactions/transactions/",e.next=3,y.a.post("http://localhost:5000/api/transactions/transactions/",Object(u.a)({},t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={email:a.props.match.params.email,balance:0,searchbarVal:"",bestMatches:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(this.state.email);case 2:t=e.sent,this.setState({balance:Number(t).toFixed(2)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.email,t=new Date(Date.now());return r.a.createElement("div",null,r.a.createElement("div",{className:"banner"},r.a.createElement(k,null),r.a.createElement("div",null,r.a.createElement("div",{className:"grid-container",style:{paddingTop:"70px"}},r.a.createElement("h1",{id:"homeTitle",style:{}},"Welcome ",e," !"),r.a.createElement("h1",{style:{color:"#1e1e6e",width:"100vw",margin:"0"}},t.toDateString(),".",r.a.createElement("br",null),"Your'e balance is $",this.state.balance,". What would you like to do today?"),r.a.createElement("div",{className:"stats"},r.a.createElement(o.b,{to:"/profile/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"View Profile"),r.a.createElement("h3",{style:{color:"#1e1e6e"}},"You have $",this.state.balance)))),r.a.createElement(o.b,{to:"/transactions/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"View Transactions"),r.a.createElement("h3",{style:{color:"#1e1e6e"}},"x transactions")))),r.a.createElement(o.b,{to:"/buy/".concat(e),style:{textDecoration:"none"}},r.a.createElement("div",{className:"stat"},r.a.createElement("div",null,r.a.createElement("h1",null,"Buy/Sell Stocks"),r.a.createElement("h3",{style:{color:"#1e1e6e"}}))))))),r.a.createElement(f,null)))}}]),t}(n.Component),F=a(52),P=a(93),V=a(92),A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).genericModal=function(){var e=Object(n.useState)(!1),t=Object(F.a)(e,2),l=t[0],c=t[1],o=function(){c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{variant:"primary",onClick:function(){return c(!0)},style:{backgroundColor:"#1e1e6e"}},a.props.label),r.a.createElement(V.a,{show:l,onHide:o},r.a.createElement(V.a.Header,{closeButton:!0},r.a.createElement(V.a.Title,null,a.props.title)),r.a.createElement(V.a.Body,null," ",a.props.form),r.a.createElement(V.a.Footer,null,r.a.createElement(P.a,{variant:"secondary",onClick:o},"Close"))))},a.state={startDate:new Date},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(this.genericModal,null)}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).inputHandler=function(e){e.preventDefault(),a.setState(Object(i.a)({},e.target.name,e.target.value),(function(){console.log(a.state)}))},a.onSubmit=function(e){e.preventDefault(),N(a.state.searchbarVal).then((function(e){a.setState({bestMatches:e[0],stockInfo:e[1]})}))},a.buyForm=function(e,t){return r.a.createElement("div",null,"The price is $",e,r.a.createElement("form",{onSubmit:function(n){n.preventDefault(),a.buy(e,n.target.shares_amount.value,t)}},r.a.createElement("input",{type:"number",pattern:"[0-9]*",min:"1",required:!0,placeholder:"Number of shares",name:"shares_amount",defaultValue:1}),r.a.createElement("button",null,"Buy Shares")))},a.buy=function(){var e=Object(j.a)(O.a.mark((function e(t,n,r){var l,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=parseInt(n),c=parseFloat(t)*l,console.log(l,c,c*l),!(a.state.balance<c)){e.next=7;break}console.log("not enough"),e.next=10;break;case 7:return e.next=9,B({shares:l,cost:c,symbol:r,email:a.state.email});case 9:console.log("enough money");case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),a.displaySearches=function(e,t){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.securityName),r.a.createElement("td",null,e.securityType),r.a.createElement("td",null," ",e.region," "),r.a.createElement("td",null,e.exchange),r.a.createElement("td",null,t[e.symbol].price),r.a.createElement("td",null,r.a.createElement(A,{form:a.buyForm(t[e.symbol].price,e.symbol),label:"Buy",title:"Buy stock share"})))}))},a.state=Object(i.a)({email:a.props.match.params.email,balance:0,searchbarVal:"",bestMatches:[],stockInfo:{}},"balance",0),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(this.state.email);case 2:t=e.sent,this.setState({balance:Number(t).toFixed(2)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displaySearches(this.state.bestMatches,this.state.stockInfo);return r.a.createElement("div",{style:{marginTop:"100px",marginBottom:"50px"}},r.a.createElement(k,null),r.a.createElement("h2",{style:{textAlign:"right",padding:"20px"}},"Your balance is $",this.state.balance),r.a.createElement("h1",null,"Make Transactions"),r.a.createElement("div",{style:{marginBottom:"20px"}},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Search stock",required:!0,name:"searchbarVal",onChange:this.inputHandler}),r.a.createElement("button",null,"Search"))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol"),r.a.createElement("th",null,"Security Name"),r.a.createElement("th",null,"Security Type"),r.a.createElement("th",null,"Region"),r.a.createElement("th",null,"Exchange"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Buy"))),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).displayTrans=function(e){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null,e.date),r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.shares))}))},a.state={email:a.props.match.params.email,transactions:[]},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this.state.email);case 2:return t=e.sent,e.next=5,M(this.state.email);case 5:a=e.sent,this.setState({transactions:t[0],balance:Number(a).toFixed(2)});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displayTrans(this.state.transactions);return r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement(k,null),r.a.createElement("h2",{style:{textAlign:"right",padding:"20px"}},"Your balance is $",this.state.balance),r.a.createElement("h1",null,"My Transactions"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Symbol/Ticker"),r.a.createElement("th",null,"Number of Shares"))),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).displayTrans=function(e,t){return e&&e.map((function(e){return r.a.createElement("tr",{key:e.symbol},r.a.createElement("td",null," ",e.symbol),r.a.createElement("td",null,e.shares),r.a.createElement("td",null,t[e.symbol].price*e.shares),r.a.createElement("td",null," ",t[e.symbol].ohlc.open.price||"N/A"," "),r.a.createElement("td",null," ",t[e.symbol].price," "),r.a.createElement("td",null," ",t[e.symbol].ohlc.close.price||"N/A"," "))}))},a.state={email:a.props.match.params.email,transactions:[],prices:{}},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(this.state.email);case 2:t=e.sent,this.setState({transactions:t[0],prices:t[1]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.displayTrans(this.state.transactions,this.state.prices);return r.a.createElement("div",{style:{marginTop:"100px"}},r.a.createElement(k,null),r.a.createElement("h1",null,"My Profile"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"datatable",style:{width:"85vw",boxShadow:"4px 4px 5px grey",margin:"auto",paddingTop:"80px"}},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Symbol/Ticker"),r.a.createElement("th",null,"Number of Shares"),r.a.createElement("th",null,"Current Values"),r.a.createElement("th",null,"Open Price"),r.a.createElement("th",null,"Current Price"),r.a.createElement("th",null,"Close Price"))),r.a.createElement("tbody",null,e)))))}}]),t}(n.Component);var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:v}),r.a.createElement(s.a,{exact:!0,path:"/register",component:g}),r.a.createElement(s.a,{exact:!0,path:"/home/:email",component:H}),r.a.createElement(s.a,{exact:!0,path:"/buy/:email",component:I}),r.a.createElement(s.a,{exact:!0,path:"/transactions/:email",component:$}),r.a.createElement(s.a,{exact:!0,path:"/profile/:email",component:L}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(89);c.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.c9dcefed.chunk.js.map